# Les Data Transfer Objects (DTO)

- [Simplifiez le transfert de données et améliorez la maintenabilité avec les DTO de Symfony.](https://medium.com/@priyankgondaliya/simplify-data-transfer-and-boost-maintainability-with-symfony-dtos-an-elegant-approach-to-data-3bbe47755212)
- [Doc Symfony Object Mapper](https://symfony.com/doc/current/object_mapper.html)

## Qu'est-ce qu’un DTO ?

Un **DTO (Data Transfer Object)** est un **objet simple** dont le rôle est de **transporter des données** d’un point A à un point B dans l’application, sans logique métier.
Il sert généralement à représenter des données **externes à l’entité** (par exemple un formulaire complexe, une API, une requête spécifique…).

Un DTO contient :

- des **propriétés** (souvent publiques ou avec getters/setters),

- **pas ou très peu de logique**,

- parfois des **contraintes de validation **(dans Symfony, avec `#[Assert]`).

## Pourquoi utiliser des DTO ?

### 1. Séparer les couches (clean architecture)

Les entités Doctrine représentent la base de données, pas la structure attendue par des formulaires, des API ou des vues.

Le DTO permet de **dissocier** ce que l’application reçoit / expose de ce qu’elle stocke.

### 2. Empêcher de modifier directement les entités

Utiliser un DTO évite qu’un utilisateur ou une API **modifie accidentellement l’entité** avec des données non prévues.

Cela améliore la **sécurité** et la **maîtrise des données**.

### 3. Réduire le couplage

Un formulaire Symfony peut être mappé sur un DTO plutôt que sur une entité.

Cela évite d’avoir des formulaires qui dépendent directement de la structure interne de la base de données.

### 4. Logique de transformation plus claire

Les DTO sont utiles lorsqu’il faut :

- transformer des données entrantes,

- agréger plusieurs entités,

- exposer un format différent vers l'extérieur (API REST, JSON, etc.).

### 5. Faciliter les tests

Les DTO sont plus simples à tester car ils ne déclenchent pas :

- de requêtes SQL,

- d'événements Doctrine.

**Exemple d’utilisation typique**

- Un **RegisterUserDTO** pour une inscription, même si l'entité `User` contient plus de champs.

- Un DTO pour une **API** qui expose seulement certains champs.

- Un DTO pour **collecter les données d’un formulaire** avant de les mapper vers une entité.